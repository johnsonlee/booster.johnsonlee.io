# PNG 图片压缩

## Pngquant

既然是缩减包大小，当然是有损压缩收益更高，而且，人眼对于图像之间的细微差异根本难以辩别，所以，我们选择有损压缩。

无论是从压缩效果和使用便利性来看，[pngquant](https://pngquant.org/) 的表现都是相当令人惊艳，但是有一个很重要的问题，[pngquant](https://pngquant.org/) 虽然是开源软件，但它是 [GPL License](https://www.gnu.org/licenses/gpl-3.0.txt)，而 *Booster* 是 [Apache License](https://www.apache.org/licenses/LICENSE-2.0)，如何既能避开法务风险，又能使用优秀的 [GPL License](https://www.gnu.org/licenses/gpl-3.0.txt) 软件呢？

## Command SPI

为了解决开源协议的冲突问题，*Booster* 专门为此提供了 [Command SPI](https://github.com/didi/booster/tree/master/booster-command)，将 *API* 与实现进行分离，*API* 采用 [Apache License](https://www.apache.org/licenses/LICENSE-2.0)，实现采用 [GPL License](https://www.gnu.org/licenses/gpl-3.0.txt)，通过 [SPI (Service Provider Interface)](https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html) 完美的解决了这一问题。

## Pngquant Provider

[booster-pngquant-provider](https://github.com/johnsonlee/booster-pngquant-provider) 作为 *pngquant* 命令的提供者，采用 [GPL License](https://www.gnu.org/licenses/gpl-3.0.txt) 独立开源，目前内置了 *Linux*, *macOS*, *Windows* 三个平台的 *pngquant* 二进制可执行文件 64 位版本。


## 实现思路

根据 *Android* 的构建流程，我们选择在 *mergeRes* 和 *processRes* 任务之间插入 *PNG* 压缩任务，如下图所示：

<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U2NyaXB0VHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCIgY29udGVudFN0eWxlVHlwZT0idGV4dC9jc3MiIGhlaWdodD0iMjQ3cHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDozNTJweDtoZWlnaHQ6MjQ3cHg7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzNTIgMjQ3IiB3aWR0aD0iMzUycHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzPjxmaWx0ZXIgaGVpZ2h0PSIzMDAlIiBpZD0iZjFvbzJ4djJ6aHF4dHQiIHdpZHRoPSIzMDAlIiB4PSItMSIgeT0iLTEiPjxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImJsdXJPdXQiIHN0ZERldmlhdGlvbj0iMi4wIi8+PGZlQ29sb3JNYXRyaXggaW49ImJsdXJPdXQiIHJlc3VsdD0iYmx1ck91dDIiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAuNCAwIi8+PGZlT2Zmc2V0IGR4PSI0LjAiIGR5PSI0LjAiIGluPSJibHVyT3V0MiIgcmVzdWx0PSJibHVyT3V0MyIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImJsdXJPdXQzIiBtb2RlPSJub3JtYWwiLz48L2ZpbHRlcj48L2RlZnM+PGc+PCEtLU1ENT1bNzdhOGNiM2FlMmE0MWQ3ZGRiNzVkNTZhNmY4YTgxNzBdCmVudGl0eSBtZXJnZVJlcy0tPjxyZWN0IGZpbGw9IiNCN0VGQ0QiIGZpbHRlcj0idXJsKCNmMW9vMnh2MnpocXh0dCkiIGhlaWdodD0iMzYuMjk2OSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iOTMiIHg9IjEyNyIgeT0iOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjczIiB4PSIxMzciIHk9IjMwLjk5NTEiPm1lcmdlUmVzPC90ZXh0PjwhLS1NRDU9W2MzZDZiMzUwY2Y4OGM2ZTRkY2RhMzRiOTM5Yzc0YWNlXQplbnRpdHkgY29tcHJlc3NSZXNvdXJjZXNXaXRoUG5ncXVhbnQtLT48cmVjdCBmaWxsPSIjRkZCQ0JDIiBmaWx0ZXI9InVybCgjZjFvbzJ4djJ6aHF4dHQpIiBoZWlnaHQ9IjM2LjI5NjkiIHN0eWxlPSJzdHJva2U6ICMwMDAwMDA7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjMzNSIgeD0iNiIgeT0iMTA0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMzE1IiB4PSIxNiIgeT0iMTI2Ljk5NTEiPmNvbXByZXNze1ZhcmlhbnR9UmVzb3VyY2VzV2l0aFBuZ3F1YW50PC90ZXh0PjwhLS1NRDU9WzQ2MWZiN2JhOTM0YjNkMjU4OTc4YTUxZjcwZTkyMjJkXQplbnRpdHkgcHJvY2Vzc1Jlcy0tPjxyZWN0IGZpbGw9IiNGMkVENkYiIGZpbHRlcj0idXJsKCNmMW9vMnh2MnpocXh0dCkiIGhlaWdodD0iMzYuMjk2OSIgc3R5bGU9InN0cm9rZTogIzAwMDAwMDsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTAyIiB4PSIxMjIuNSIgeT0iMjAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iODIiIHg9IjEzMi41IiB5PSIyMjIuOTk1MSI+cHJvY2Vzc1JlczwvdGV4dD48IS0tTUQ1PVs5Y2Y5MGRkMjVkYjQ4ZjRkOWRiY2E3YWRjMDllY2NiOV0KbGluayBtZXJnZVJlcyB0byBjb21wcmVzc1Jlc291cmNlc1dpdGhQbmdxdWFudC0tPjxwYXRoIGQ9Ik0xNzMuNSw0NC4yNDEgQzE3My41LDU5LjQ3OSAxNzMuNSw4MS44MDcgMTczLjUsOTguNDU4ICIgZmlsbD0ibm9uZSIgaWQ9Im1lcmdlUmVzLSZndDtjb21wcmVzc1Jlc291cmNlc1dpdGhQbmdxdWFudCIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBvbHlnb24gZmlsbD0iI0E4MDAzNiIgcG9pbnRzPSIxNzMuNSwxMDMuODY4LDE3Ny41LDk0Ljg2OCwxNzMuNSw5OC44NjgsMTY5LjUsOTQuODY4LDE3My41LDEwMy44NjgiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1NRDU9WzExYjkxZTVkMDI5ZjNkYjFkY2Y1MmVkMzlmYzk3YjIwXQpsaW5rIGNvbXByZXNzUmVzb3VyY2VzV2l0aFBuZ3F1YW50IHRvIHByb2Nlc3NSZXMtLT48cGF0aCBkPSJNMTczLjUsMTQwLjI0MSBDMTczLjUsMTU1LjQ3OTEgMTczLjUsMTc3LjgwNjkgMTczLjUsMTk0LjQ1NzYgIiBmaWxsPSJub25lIiBpZD0iY29tcHJlc3NSZXNvdXJjZXNXaXRoUG5ncXVhbnQtJmd0O3Byb2Nlc3NSZXMiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxwb2x5Z29uIGZpbGw9IiNBODAwMzYiIHBvaW50cz0iMTczLjUsMTk5Ljg2ODMsMTc3LjUsMTkwLjg2ODMsMTczLjUsMTk0Ljg2ODMsMTY5LjUsMTkwLjg2ODMsMTczLjUsMTk5Ljg2ODMiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1NRDU9WzliMmExYmRlMjBhMjU1NDAwMDE0MWFjMDVhMWRkNmQ4XQpAc3RhcnR1bWwNCnJlY3RhbmdsZSBtZXJnZVJlcyAjYjdlZmNkIA0KcmVjdGFuZ2xlIGNvbXByZXNzUmVzb3VyY2VzV2l0aFBuZ3F1YW50IGFzICJjb21wcmVzc3tWYXJpYW50fVJlc291cmNlc1dpdGhQbmdxdWFudCIgI2ZmYmNiYyANCnJlY3RhbmdsZSBwcm9jZXNzUmVzICNmMmVkNmYgDQoNCm1lcmdlUmVzIC1kLT4gY29tcHJlc3NSZXNvdXJjZXNXaXRoUG5ncXVhbnQNCmNvbXByZXNzUmVzb3VyY2VzV2l0aFBuZ3F1YW50IC1kLT4gcHJvY2Vzc1Jlcw0KQGVuZHVtbA0KClBsYW50VU1MIHZlcnNpb24gMS4yMDIwLjA5YmV0YTE3KFVua25vd24gY29tcGlsZSB0aW1lKQooR1BMIHNvdXJjZSBkaXN0cmlidXRpb24pCkphdmEgUnVudGltZTogSmF2YShUTSkgU0UgUnVudGltZSBFbnZpcm9ubWVudApKVk06IEphdmEgSG90U3BvdChUTSkgNjQtQml0IFNlcnZlciBWTQpKYXZhIFZlcnNpb246IDE0LjAuMSs3Ck9wZXJhdGluZyBTeXN0ZW06IExpbnV4CkRlZmF1bHQgRW5jb2Rpbmc6IFVURi04Ckxhbmd1YWdlOiBlbgpDb3VudHJ5OiBVUwotLT48L2c+PC9zdmc+">

自 *AGP 3.0.0* 开始，*AAPT2* 默认会被开启，由于 *AAPT2* 采用了 [AAPT2 Container 格式](https://android.googlesource.com/platform/frameworks/base/+/master/tools/aapt2/formats.md) (文件后缀为 `.flat`) 所以，需要在压缩之前需要明确，项目中是否开启 `android.enableAapt2` 的选项，因此 *Booster* 根据 *AAPT2* 选项分不同的 *task* 来处理：

<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U2NyaXB0VHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCIgY29udGVudFN0eWxlVHlwZT0idGV4dC9jc3MiIGhlaWdodD0iNDkzcHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDo0NzVweDtoZWlnaHQ6NDkzcHg7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA0NzUgNDkzIiB3aWR0aD0iNDc1cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzPjxmaWx0ZXIgaGVpZ2h0PSIzMDAlIiBpZD0iZjFwZjJxemI2M2htNTQiIHdpZHRoPSIzMDAlIiB4PSItMSIgeT0iLTEiPjxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImJsdXJPdXQiIHN0ZERldmlhdGlvbj0iMi4wIi8+PGZlQ29sb3JNYXRyaXggaW49ImJsdXJPdXQiIHJlc3VsdD0iYmx1ck91dDIiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAuNCAwIi8+PGZlT2Zmc2V0IGR4PSI0LjAiIGR5PSI0LjAiIGluPSJibHVyT3V0MiIgcmVzdWx0PSJibHVyT3V0MyIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImJsdXJPdXQzIiBtb2RlPSJub3JtYWwiLz48L2ZpbHRlcj48L2RlZnM+PGc+PCEtLU1ENT1bY2Q3YjM4ZGQ4YmE0MmJiYTE2OTgyM2ZhNTEwNzgxZmZdCmNsYXNzIENvbXByZXNzSW1hZ2VzLS0+PHJlY3QgZmlsbD0iI0ZFRkVDRSIgZmlsdGVyPSJ1cmwoI2YxcGYycXpiNjNobTU0KSIgaGVpZ2h0PSIxMTIuMDIzNCIgaWQ9IkNvbXByZXNzSW1hZ2VzIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIyNDEiIHg9IjEwOC41IiB5PSIxMTYiLz48ZWxsaXBzZSBjeD0iMTcyLjI1IiBjeT0iMTMyIiBmaWxsPSIjQTlEQ0RGIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBhdGggZD0iTTE3My44MjgxLDEzMy44MTI1IEwxNjkuNzgxMywxMzMuODEyNSBMMTY5LjM5MDYsMTM0Ljc5NjkgTDE2OS43ODEzLDEzNC43OTY5IEMxNzAuMjM0NCwxMzQuNzk2OSAxNzAuMzc1LDEzNC44MjgxIDE3MC41NDY5LDEzNC45NTMxIEMxNzAuNzY1NiwxMzUuMTI1IDE3MC44OTA2LDEzNS4zNzUgMTcwLjg5MDYsMTM1LjY1NjMgQzE3MC44OTA2LDEzNS45Mzc1IDE3MC43NSwxMzYuMjM0NCAxNzAuNDg0NCwxMzYuMzc1IEMxNzAuMzU5NCwxMzYuNDY4OCAxNzAuMTQwNiwxMzYuNSAxNjkuNzgxMywxMzYuNSBMMTY3LjUxNTYsMTM2LjUgQzE2Ni43NjU2LDEzNi41IDE2Ni4zOTA2LDEzNi4yMTg4IDE2Ni4zOTA2LDEzNS42NTYzIEMxNjYuMzkwNiwxMzUuMzU5NCAxNjYuNTQ2OSwxMzUuMDc4MSAxNjYuNzk2OSwxMzQuOTIxOSBDMTY2Ljk1MzEsMTM0LjgxMjUgMTY3LjEwOTQsMTM0Ljc5NjkgMTY3LjUzMTMsMTM0Ljc5NjkgTDE3MC4xNzE5LDEyOC4yODEzIEwxNjkuMDkzOCwxMjguMjgxMyBDMTY4LjY1NjMsMTI4LjI4MTMgMTY4LjQ4NDQsMTI4LjI1IDE2OC4zMTI1LDEyOC4xNDA2IEMxNjguMDkzOCwxMjcuOTY4OCAxNjcuOTUzMSwxMjcuNzE4OCAxNjcuOTUzMSwxMjcuNDM3NSBDMTY3Ljk1MzEsMTI3LjE1NjMgMTY4LjEwOTQsMTI2Ljg3NSAxNjguMzU5NCwxMjYuNzAzMSBDMTY4LjUxNTYsMTI2LjYwOTQgMTY4LjY0MDYsMTI2LjU5MzggMTY5LjA5MzgsMTI2LjU5MzggTDE3Mi43NjU2LDEyNi41OTM4IEwxNzYuMTU2MywxMzQuNzk2OSBDMTc2LjYyNSwxMzQuNzk2OSAxNzYuNzgxMywxMzQuODI4MSAxNzYuOTUzMSwxMzQuOTY4OCBDMTc3LjE3MTksMTM1LjEyNSAxNzcuMzEyNSwxMzUuMzc1IDE3Ny4zMTI1LDEzNS42NTYzIEMxNzcuMzEyNSwxMzUuOTM3NSAxNzcuMTU2MywxMzYuMjM0NCAxNzYuOTA2MywxMzYuMzc1IEMxNzYuNzY1NiwxMzYuNDY4OCAxNzYuNTQ2OSwxMzYuNSAxNzYuMTg3NSwxMzYuNSBMMTczLjgyODEsMTM2LjUgQzE3My40MDYzLDEzNi41IDE3My4yMDMxLDEzNi40NTMxIDE3My4wNjI1LDEzNi4zMjgxIEMxNzIuODQzOCwxMzYuMTcxOSAxNzIuNzAzMSwxMzUuOTIxOSAxNzIuNzAzMSwxMzUuNjU2MyBDMTcyLjcwMzEsMTM1LjM1OTQgMTcyLjg1OTQsMTM1LjA3ODEgMTczLjEwOTQsMTM0LjkyMTkgQzE3My4yNjU2LDEzNC44MTI1IDE3My4zNzUsMTM0Ljc5NjkgMTczLjgyODEsMTM0Ljc5NjkgTDE3NC4yMTg4LDEzNC43OTY5IFogTTE3My4xMjUsMTMyLjEwOTQgTDE3MS43OTY5LDEyOC44NDM4IEwxNzAuNDUzMSwxMzIuMTA5NCBaICIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMTA1IiB4PSIxOTIuNzUiIHk9IjEzNi4xNTQzIj5Db21wcmVzc0ltYWdlczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHgxPSIxMDkuNSIgeDI9IjM0OC41IiB5MT0iMTQ4IiB5Mj0iMTQ4Ii8+PGVsbGlwc2UgY3g9IjExOS41IiBjeT0iMTU5IiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6ICMwMzgwNDg7IHN0cm9rZS13aWR0aDogMS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjEzMyIgeD0iMTI4LjUiIHk9IjE2Mi4yMTA0Ij50b29sOiBDb21wcmVzc2lvblRvb2w7PC90ZXh0PjxlbGxpcHNlIGN4PSIxMTkuNSIgY3k9IjE3MS44MDQ3IiBmaWxsPSJub25lIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6ICMwMzgwNDg7IHN0cm9rZS13aWR0aDogMS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjEyMCIgeD0iMTI4LjUiIHk9IjE3NS4wMTUxIj52YXJpYW50OiBCYXNlVmFyaWFudDs8L3RleHQ+PGVsbGlwc2UgY3g9IjExOS41IiBjeT0iMTg0LjYwOTQiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTogIzAzODA0ODsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMTc0IiB4PSIxMjguNSIgeT0iMTg3LjgxOTgiPm9wdGlvbnM6IENvbXByZXNzaW9uT3B0aW9uczs8L3RleHQ+PGVsbGlwc2UgY3g9IjExOS41IiBjeT0iMTk3LjQxNDEiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTogIzAzODA0ODsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMTcwIiB4PSIxMjguNSIgeT0iMjAwLjYyNDUiPnJlc3VsdHM6IENvbXByZXNzaW9uUmVzdWx0czs8L3RleHQ+PGVsbGlwc2UgY3g9IjExOS41IiBjeT0iMjEwLjIxODgiIGZpbGw9Im5vbmUiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTogIzAzODA0ODsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMjE1IiB4PSIxMjguNSIgeT0iMjEzLjQyOTIiPnN1cHBsaWVyOiBTdXBwbGllciZsdDtDb2xsZWN0aW9uJmx0O0ZpbGUmZ3Q7Jmd0Ozs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB4MT0iMTA5LjUiIHgyPSIzNDguNSIgeTE9IjIyMC4wMjM0IiB5Mj0iMjIwLjAyMzQiLz48IS0tTUQ1PVszZmFhYmRjMDZjNzliM2Y3YjI5OTVkOWUwNDcyMzhmNl0KY2xhc3MgRGVmYXVsdFRhc2stLT48cmVjdCBmaWxsPSIjRkVGRUNFIiBmaWx0ZXI9InVybCgjZjFwZjJxemI2M2htNTQpIiBoZWlnaHQ9IjQ4IiBpZD0iRGVmYXVsdFRhc2siIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjEwNiIgeD0iMTc2IiB5PSI4Ii8+PGVsbGlwc2UgY3g9IjE5MSIgY3k9IjI0IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBhdGggZD0iTTE5My4zNDM4LDE5LjY3MTkgTDE5My41MTU2LDE5Ljc1IEMxOTMuNzM0NCwxOS40Mzc1IDE5My45Mzc1LDE5LjM0MzggMTk0LjIzNDQsMTkuMzQzOCBDMTk0LjUzMTMsMTkuMzQzOCAxOTQuODEyNSwxOS40ODQ0IDE5NC45Njg4LDE5Ljc1IEMxOTUuMDYyNSwxOS45MDYzIDE5NS4wNzgxLDIwLjAzMTMgMTk1LjA3ODEsMjAuNDY4OCBMMTk1LjA3ODEsMjEuODkwNiBDMTk1LjA3ODEsMjIuMzEyNSAxOTUuMDQ2OSwyMi41IDE5NC45Mzc1LDIyLjY1NjMgQzE5NC43NjU2LDIyLjg3NSAxOTQuNSwyMy4wMTU2IDE5NC4yMzQ0LDIzLjAxNTYgQzE5NC4wMTU2LDIzLjAxNTYgMTkzLjc4MTMsMjIuOTA2MyAxOTMuNjQwNiwyMi43NjU2IEMxOTMuNSwyMi42NDA2IDE5My40Njg4LDIyLjUxNTYgMTkzLjQwNjMsMjIuMTA5NCBDMTkzLjMxMjUsMjEuNzAzMSAxOTMuMTQwNiwyMS40ODQ0IDE5Mi42NTYzLDIxLjIwMzEgQzE5Mi4xODc1LDIwLjk1MzEgMTkxLjU3ODEsMjAuNzk2OSAxOTEsMjAuNzk2OSBDMTg5LjI2NTYsMjAuNzk2OSAxODguMDE1NiwyMi4xMDk0IDE4OC4wMTU2LDIzLjg5MDYgTDE4OC4wMTU2LDI0Ljk4NDQgQzE4OC4wMTU2LDI2LjY4NzUgMTg5LjMxMjUsMjcuNzgxMyAxOTEuMzU5NCwyNy43ODEzIEMxOTIuMTI1LDI3Ljc4MTMgMTkyLjgxMjUsMjcuNjU2MyAxOTMuMjM0NCwyNy4zOTA2IEMxOTMuNDIxOSwyNy4yOTY5IDE5My40MjE5LDI3LjI5NjkgMTkzLjg3NSwyNi44MTI1IEMxOTQuMDYyNSwyNi42MjUgMTk0LjI2NTYsMjYuNTQ2OSAxOTQuNDg0NCwyNi41NDY5IEMxOTQuOTUzMSwyNi41NDY5IDE5NS4zNDM4LDI2LjkzNzUgMTk1LjM0MzgsMjcuMzkwNiBDMTk1LjM0MzgsMjcuNzgxMyAxOTUuMDE1NiwyOC4yMzQ0IDE5NC40Mzc1LDI4LjY0MDYgQzE5My42ODc1LDI5LjE4NzUgMTkyLjUzMTMsMjkuNDg0NCAxOTEuMzEyNSwyOS40ODQ0IEMxODguNDIxOSwyOS40ODQ0IDE4Ni4zMTI1LDI3LjU5MzggMTg2LjMxMjUsMjUuMDE1NiBMMTg2LjMxMjUsMjMuODkwNiBDMTg2LjMxMjUsMjEuMTcxOSAxODguMzEyNSwxOS4wOTM4IDE5MC45Mzc1LDE5LjA5MzggQzE5MS44MTI1LDE5LjA5MzggMTkyLjQwNjMsMTkuMjM0NCAxOTMuMzQzOCwxOS42NzE5IFogIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iNzQiIHg9IjIwNSIgeT0iMjguMTU0MyI+RGVmYXVsdFRhc2s8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB4MT0iMTc3IiB4Mj0iMjgxIiB5MT0iNDAiIHkyPSI0MCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgeDE9IjE3NyIgeDI9IjI4MSIgeTE9IjQ4IiB5Mj0iNDgiLz48IS0tTUQ1PVsxMmY2ZjBhOTM5NTYwZDUzNWNjNGNlMTIxNjkzMjEzMF0KY2xhc3MgQWJzdHJhY3RQbmdxdWFudENvbXByZXNzSW1hZ2VzLS0+PHJlY3QgZmlsbD0iI0ZFRkVDRSIgZmlsdGVyPSJ1cmwoI2YxcGYycXpiNjNobTU0KSIgaGVpZ2h0PSI3My42MDk0IiBpZD0iQWJzdHJhY3RQbmdxdWFudENvbXByZXNzSW1hZ2VzIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIyNDkiIHg9IjEwNC41IiB5PSIyODgiLz48ZWxsaXBzZSBjeD0iMTE5LjUiIGN5PSIzMDQiIGZpbGw9IiNBOURDREYiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cGF0aCBkPSJNMTIxLjA3ODEsMzA1LjgxMjUgTDExNy4wMzEzLDMwNS44MTI1IEwxMTYuNjQwNiwzMDYuNzk2OSBMMTE3LjAzMTMsMzA2Ljc5NjkgQzExNy40ODQ0LDMwNi43OTY5IDExNy42MjUsMzA2LjgyODEgMTE3Ljc5NjksMzA2Ljk1MzEgQzExOC4wMTU2LDMwNy4xMjUgMTE4LjE0MDYsMzA3LjM3NSAxMTguMTQwNiwzMDcuNjU2MyBDMTE4LjE0MDYsMzA3LjkzNzUgMTE4LDMwOC4yMzQ0IDExNy43MzQ0LDMwOC4zNzUgQzExNy42MDk0LDMwOC40Njg4IDExNy4zOTA2LDMwOC41IDExNy4wMzEzLDMwOC41IEwxMTQuNzY1NiwzMDguNSBDMTE0LjAxNTYsMzA4LjUgMTEzLjY0MDYsMzA4LjIxODggMTEzLjY0MDYsMzA3LjY1NjMgQzExMy42NDA2LDMwNy4zNTk0IDExMy43OTY5LDMwNy4wNzgxIDExNC4wNDY5LDMwNi45MjE5IEMxMTQuMjAzMSwzMDYuODEyNSAxMTQuMzU5NCwzMDYuNzk2OSAxMTQuNzgxMywzMDYuNzk2OSBMMTE3LjQyMTksMzAwLjI4MTMgTDExNi4zNDM4LDMwMC4yODEzIEMxMTUuOTA2MywzMDAuMjgxMyAxMTUuNzM0NCwzMDAuMjUgMTE1LjU2MjUsMzAwLjE0MDYgQzExNS4zNDM4LDI5OS45Njg4IDExNS4yMDMxLDI5OS43MTg4IDExNS4yMDMxLDI5OS40Mzc1IEMxMTUuMjAzMSwyOTkuMTU2MyAxMTUuMzU5NCwyOTguODc1IDExNS42MDk0LDI5OC43MDMxIEMxMTUuNzY1NiwyOTguNjA5NCAxMTUuODkwNiwyOTguNTkzOCAxMTYuMzQzOCwyOTguNTkzOCBMMTIwLjAxNTYsMjk4LjU5MzggTDEyMy40MDYzLDMwNi43OTY5IEMxMjMuODc1LDMwNi43OTY5IDEyNC4wMzEzLDMwNi44MjgxIDEyNC4yMDMxLDMwNi45Njg4IEMxMjQuNDIxOSwzMDcuMTI1IDEyNC41NjI1LDMwNy4zNzUgMTI0LjU2MjUsMzA3LjY1NjMgQzEyNC41NjI1LDMwNy45Mzc1IDEyNC40MDYzLDMwOC4yMzQ0IDEyNC4xNTYzLDMwOC4zNzUgQzEyNC4wMTU2LDMwOC40Njg4IDEyMy43OTY5LDMwOC41IDEyMy40Mzc1LDMwOC41IEwxMjEuMDc4MSwzMDguNSBDMTIwLjY1NjMsMzA4LjUgMTIwLjQ1MzEsMzA4LjQ1MzEgMTIwLjMxMjUsMzA4LjMyODEgQzEyMC4wOTM4LDMwOC4xNzE5IDExOS45NTMxLDMwNy45MjE5IDExOS45NTMxLDMwNy42NTYzIEMxMTkuOTUzMSwzMDcuMzU5NCAxMjAuMTA5NCwzMDcuMDc4MSAxMjAuMzU5NCwzMDYuOTIxOSBDMTIwLjUxNTYsMzA2LjgxMjUgMTIwLjYyNSwzMDYuNzk2OSAxMjEuMDc4MSwzMDYuNzk2OSBMMTIxLjQ2ODgsMzA2Ljc5NjkgWiBNMTIwLjM3NSwzMDQuMTA5NCBMMTE5LjA0NjksMzAwLjg0MzggTDExNy43MDMxLDMwNC4xMDk0IFogIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIyMTciIHg9IjEzMy41IiB5PSIzMDguMTU0MyI+QWJzdHJhY3RQbmdxdWFudENvbXByZXNzSW1hZ2VzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgeDE9IjEwNS41IiB4Mj0iMzUyLjUiIHkxPSIzMjAiIHkyPSIzMjAiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHgxPSIxMDUuNSIgeDI9IjM1Mi41IiB5MT0iMzI4IiB5Mj0iMzI4Ii8+PHBvbHlnb24gZmlsbD0iI0ZGRkY0NCIgcG9pbnRzPSIxMTUuNSwzMzQsMTE5LjUsMzM4LDExNS41LDM0MiwxMTEuNSwzMzgiIHN0eWxlPSJzdHJva2U6ICNCMzhEMjI7IHN0cm9rZS13aWR0aDogMS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iOTUiIHg9IjEyNC41IiB5PSIzNDIuMjEwNCI+Y29tcHJlc3MoKTogdm9pZDwvdGV4dD48ZWxsaXBzZSBjeD0iMTE1LjUiIGN5PSIzNTEuODA0NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiAjMDM4MDQ4OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI1OCIgeD0iMTI0LjUiIHk9IjM1NS4wMTUxIj5ydW4oKTogdm9pZDwvdGV4dD48IS0tTUQ1PVtlYWE3NGVmYTQ0NTcwNWUyOGExZjg4ZTNiNThiYjFiY10KY2xhc3MgUG5ncXVhbnRDb21wcmVzc0ltYWdlcy0tPjxyZWN0IGZpbGw9IiNGRUZFQ0UiIGZpbHRlcj0idXJsKCNmMXBmMnF6YjYzaG01NCkiIGhlaWdodD0iNjAuODA0NyIgaWQ9IlBuZ3F1YW50Q29tcHJlc3NJbWFnZXMiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjIwMCIgeD0iNiIgeT0iNDIyIi8+PGVsbGlwc2UgY3g9IjIxIiBjeT0iNDM4IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBhdGggZD0iTTIzLjM0MzgsNDMzLjY3MTkgTDIzLjUxNTYsNDMzLjc1IEMyMy43MzQ0LDQzMy40Mzc1IDIzLjkzNzUsNDMzLjM0MzggMjQuMjM0NCw0MzMuMzQzOCBDMjQuNTMxMyw0MzMuMzQzOCAyNC44MTI1LDQzMy40ODQ0IDI0Ljk2ODgsNDMzLjc1IEMyNS4wNjI1LDQzMy45MDYzIDI1LjA3ODEsNDM0LjAzMTMgMjUuMDc4MSw0MzQuNDY4OCBMMjUuMDc4MSw0MzUuODkwNiBDMjUuMDc4MSw0MzYuMzEyNSAyNS4wNDY5LDQzNi41IDI0LjkzNzUsNDM2LjY1NjMgQzI0Ljc2NTYsNDM2Ljg3NSAyNC41LDQzNy4wMTU2IDI0LjIzNDQsNDM3LjAxNTYgQzI0LjAxNTYsNDM3LjAxNTYgMjMuNzgxMyw0MzYuOTA2MyAyMy42NDA2LDQzNi43NjU2IEMyMy41LDQzNi42NDA2IDIzLjQ2ODgsNDM2LjUxNTYgMjMuNDA2Myw0MzYuMTA5NCBDMjMuMzEyNSw0MzUuNzAzMSAyMy4xNDA2LDQzNS40ODQ0IDIyLjY1NjMsNDM1LjIwMzEgQzIyLjE4NzUsNDM0Ljk1MzEgMjEuNTc4MSw0MzQuNzk2OSAyMSw0MzQuNzk2OSBDMTkuMjY1Niw0MzQuNzk2OSAxOC4wMTU2LDQzNi4xMDk0IDE4LjAxNTYsNDM3Ljg5MDYgTDE4LjAxNTYsNDM4Ljk4NDQgQzE4LjAxNTYsNDQwLjY4NzUgMTkuMzEyNSw0NDEuNzgxMyAyMS4zNTk0LDQ0MS43ODEzIEMyMi4xMjUsNDQxLjc4MTMgMjIuODEyNSw0NDEuNjU2MyAyMy4yMzQ0LDQ0MS4zOTA2IEMyMy40MjE5LDQ0MS4yOTY5IDIzLjQyMTksNDQxLjI5NjkgMjMuODc1LDQ0MC44MTI1IEMyNC4wNjI1LDQ0MC42MjUgMjQuMjY1Niw0NDAuNTQ2OSAyNC40ODQ0LDQ0MC41NDY5IEMyNC45NTMxLDQ0MC41NDY5IDI1LjM0MzgsNDQwLjkzNzUgMjUuMzQzOCw0NDEuMzkwNiBDMjUuMzQzOCw0NDEuNzgxMyAyNS4wMTU2LDQ0Mi4yMzQ0IDI0LjQzNzUsNDQyLjY0MDYgQzIzLjY4NzUsNDQzLjE4NzUgMjIuNTMxMyw0NDMuNDg0NCAyMS4zMTI1LDQ0My40ODQ0IEMxOC40MjE5LDQ0My40ODQ0IDE2LjMxMjUsNDQxLjU5MzggMTYuMzEyNSw0MzkuMDE1NiBMMTYuMzEyNSw0MzcuODkwNiBDMTYuMzEyNSw0MzUuMTcxOSAxOC4zMTI1LDQzMy4wOTM4IDIwLjkzNzUsNDMzLjA5MzggQzIxLjgxMjUsNDMzLjA5MzggMjIuNDA2Myw0MzMuMjM0NCAyMy4zNDM4LDQzMy42NzE5IFogIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMTY4IiB4PSIzNSIgeT0iNDQyLjE1NDMiPlBuZ3F1YW50Q29tcHJlc3NJbWFnZXM8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB4MT0iNyIgeDI9IjIwNSIgeTE9IjQ1NCIgeTI9IjQ1NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgeDE9IjciIHgyPSIyMDUiIHkxPSI0NjIiIHkyPSI0NjIiLz48cG9seWdvbiBmaWxsPSIjRkZGRjQ0IiBwb2ludHM9IjE3LDQ2OCwyMSw0NzIsMTcsNDc2LDEzLDQ3MiIgc3R5bGU9InN0cm9rZTogI0IzOEQyMjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iOTYiIHg9IjI2IiB5PSI0NzYuMjEwNCI+Y29tcHJlc3MoKTogdm9pZDwvdGV4dD48IS0tTUQ1PVsyZTk2OTFjZjhjMzMyZDYzZjg4MWYyZDg0Y2ZkNmE0M10KY2xhc3MgUG5ncXVhbnRDb21wcmVzc0ZsYXRJbWFnZXMtLT48cmVjdCBmaWxsPSIjRkVGRUNFIiBmaWx0ZXI9InVybCgjZjFwZjJxemI2M2htNTQpIiBoZWlnaHQ9IjYwLjgwNDciIGlkPSJQbmdxdWFudENvbXByZXNzRmxhdEltYWdlcyIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMjIzIiB4PSIyNDEuNSIgeT0iNDIyIi8+PGVsbGlwc2UgY3g9IjI1Ni41IiBjeT0iNDM4IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBhdGggZD0iTTI1OC44NDM4LDQzMy42NzE5IEwyNTkuMDE1Niw0MzMuNzUgQzI1OS4yMzQ0LDQzMy40Mzc1IDI1OS40Mzc1LDQzMy4zNDM4IDI1OS43MzQ0LDQzMy4zNDM4IEMyNjAuMDMxMyw0MzMuMzQzOCAyNjAuMzEyNSw0MzMuNDg0NCAyNjAuNDY4OCw0MzMuNzUgQzI2MC41NjI1LDQzMy45MDYzIDI2MC41NzgxLDQzNC4wMzEzIDI2MC41NzgxLDQzNC40Njg4IEwyNjAuNTc4MSw0MzUuODkwNiBDMjYwLjU3ODEsNDM2LjMxMjUgMjYwLjU0NjksNDM2LjUgMjYwLjQzNzUsNDM2LjY1NjMgQzI2MC4yNjU2LDQzNi44NzUgMjYwLDQzNy4wMTU2IDI1OS43MzQ0LDQzNy4wMTU2IEMyNTkuNTE1Niw0MzcuMDE1NiAyNTkuMjgxMyw0MzYuOTA2MyAyNTkuMTQwNiw0MzYuNzY1NiBDMjU5LDQzNi42NDA2IDI1OC45Njg4LDQzNi41MTU2IDI1OC45MDYzLDQzNi4xMDk0IEMyNTguODEyNSw0MzUuNzAzMSAyNTguNjQwNiw0MzUuNDg0NCAyNTguMTU2Myw0MzUuMjAzMSBDMjU3LjY4NzUsNDM0Ljk1MzEgMjU3LjA3ODEsNDM0Ljc5NjkgMjU2LjUsNDM0Ljc5NjkgQzI1NC43NjU2LDQzNC43OTY5IDI1My41MTU2LDQzNi4xMDk0IDI1My41MTU2LDQzNy44OTA2IEwyNTMuNTE1Niw0MzguOTg0NCBDMjUzLjUxNTYsNDQwLjY4NzUgMjU0LjgxMjUsNDQxLjc4MTMgMjU2Ljg1OTQsNDQxLjc4MTMgQzI1Ny42MjUsNDQxLjc4MTMgMjU4LjMxMjUsNDQxLjY1NjMgMjU4LjczNDQsNDQxLjM5MDYgQzI1OC45MjE5LDQ0MS4yOTY5IDI1OC45MjE5LDQ0MS4yOTY5IDI1OS4zNzUsNDQwLjgxMjUgQzI1OS41NjI1LDQ0MC42MjUgMjU5Ljc2NTYsNDQwLjU0NjkgMjU5Ljk4NDQsNDQwLjU0NjkgQzI2MC40NTMxLDQ0MC41NDY5IDI2MC44NDM4LDQ0MC45Mzc1IDI2MC44NDM4LDQ0MS4zOTA2IEMyNjAuODQzOCw0NDEuNzgxMyAyNjAuNTE1Niw0NDIuMjM0NCAyNTkuOTM3NSw0NDIuNjQwNiBDMjU5LjE4NzUsNDQzLjE4NzUgMjU4LjAzMTMsNDQzLjQ4NDQgMjU2LjgxMjUsNDQzLjQ4NDQgQzI1My45MjE5LDQ0My40ODQ0IDI1MS44MTI1LDQ0MS41OTM4IDI1MS44MTI1LDQzOS4wMTU2IEwyNTEuODEyNSw0MzcuODkwNiBDMjUxLjgxMjUsNDM1LjE3MTkgMjUzLjgxMjUsNDMzLjA5MzggMjU2LjQzNzUsNDMzLjA5MzggQzI1Ny4zMTI1LDQzMy4wOTM4IDI1Ny45MDYzLDQzMy4yMzQ0IDI1OC44NDM4LDQzMy42NzE5IFogIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMTkxIiB4PSIyNzAuNSIgeT0iNDQyLjE1NDMiPlBuZ3F1YW50Q29tcHJlc3NGbGF0SW1hZ2VzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgeDE9IjI0Mi41IiB4Mj0iNDYzLjUiIHkxPSI0NTQiIHkyPSI0NTQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHgxPSIyNDIuNSIgeDI9IjQ2My41IiB5MT0iNDYyIiB5Mj0iNDYyIi8+PHBvbHlnb24gZmlsbD0iI0ZGRkY0NCIgcG9pbnRzPSIyNTIuNSw0NjgsMjU2LjUsNDcyLDI1Mi41LDQ3NiwyNDguNSw0NzIiIHN0eWxlPSJzdHJva2U6ICNCMzhEMjI7IHN0cm9rZS13aWR0aDogMS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9Ijk2IiB4PSIyNjEuNSIgeT0iNDc2LjIxMDQiPmNvbXByZXNzKCk6IHZvaWQ8L3RleHQ+PCEtLU1ENT1bNzkxM2IyNzI4MDUzYjg5MjdmYjg5YzI4NGQ3NDZiMWRdCnJldmVyc2UgbGluayBEZWZhdWx0VGFzayB0byBDb21wcmVzc0ltYWdlcy0tPjxwYXRoIGQ9Ik0yMjksNzYuMjQ2IEMyMjksODguODIyIDIyOSwxMDIuNzMyIDIyOSwxMTUuOTMxICIgZmlsbD0ibm9uZSIgaWQ9IkRlZmF1bHRUYXNrJmx0Oy1Db21wcmVzc0ltYWdlcyIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSIyMjIsNzYuMDk4LDIyOSw1Ni4wOTgsMjM2LDc2LjA5OCwyMjIsNzYuMDk4IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48IS0tTUQ1PVtkM2VlZDk2NDA5OWIxNGE2ZDliYjNhOTJmYmQ1ZmZhM10KcmV2ZXJzZSBsaW5rIENvbXByZXNzSW1hZ2VzIHRvIEFic3RyYWN0UG5ncXVhbnRDb21wcmVzc0ltYWdlcy0tPjxwYXRoIGQ9Ik0yMjksMjQ4LjgzOCBDMjI5LDI2Mi40NjkgMjI5LDI3Ni4wODUgMjI5LDI4Ny45MSAiIGZpbGw9Im5vbmUiIGlkPSJDb21wcmVzc0ltYWdlcyZsdDstQWJzdHJhY3RQbmdxdWFudENvbXByZXNzSW1hZ2VzIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjIyMiwyNDguMzY5LDIyOSwyMjguMzY5LDIzNiwyNDguMzY5LDIyMiwyNDguMzY5IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48IS0tTUQ1PVs3ZTU1YjJjOWNlNzg5OTc1ZmY0NjY4YzQ4ZTg2NWYyNF0KcmV2ZXJzZSBsaW5rIEFic3RyYWN0UG5ncXVhbnRDb21wcmVzc0ltYWdlcyB0byBQbmdxdWFudENvbXByZXNzSW1hZ2VzLS0+PHBhdGggZD0iTTE3OS4wMDksMzc3LjAwNyBDMTY0LjE0OSwzOTIuMTY4OCAxNDguMzYsNDA4LjI3ODYgMTM1LjI4MSw0MjEuNjI0ICIgZmlsbD0ibm9uZSIgaWQ9IkFic3RyYWN0UG5ncXVhbnRDb21wcmVzc0ltYWdlcyZsdDstUG5ncXVhbnRDb21wcmVzc0ltYWdlcyIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSIxNzQuNDI1LDM3MS42ODQsMTkzLjQyMywzNjIuMywxODQuNDIzLDM4MS40ODMsMTc0LjQyNSwzNzEuNjg0IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48IS0tTUQ1PVtjNjE1YTJiZjk4OTc1OTE5NjI3NWFkM2ZmMDNlYTY2MV0KcmV2ZXJzZSBsaW5rIEFic3RyYWN0UG5ncXVhbnRDb21wcmVzc0ltYWdlcyB0byBQbmdxdWFudENvbXByZXNzRmxhdEltYWdlcy0tPjxwYXRoIGQ9Ik0yNzguOTMsMzc2LjUzNCBDMjk0LjA0NiwzOTEuODMyOSAzMTAuMTU4LDQwOC4xMzk2IDMyMy40ODEsNDIxLjYyNCAiIGZpbGw9Im5vbmUiIGlkPSJBYnN0cmFjdFBuZ3F1YW50Q29tcHJlc3NJbWFnZXMmbHQ7LVBuZ3F1YW50Q29tcHJlc3NGbGF0SW1hZ2VzIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjI3My45NDMsMzgxLjQ0NywyNjQuODY2LDM2Mi4zLDI4My45MDIsMzcxLjYwNywyNzMuOTQzLDM4MS40NDciIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1NRDU9WzI3NzE2N2M1YTliMTlhZWZiZTNkYmFlMDlmNDc5ZWZlXQpAc3RhcnR1bWwNCmFic3RyYWN0IGNsYXNzIENvbXByZXNzSW1hZ2VzIGV4dGVuZHMgRGVmYXVsdFRhc2sgew0KICAgICsgdG9vbDogQ29tcHJlc3Npb25Ub29sOw0KICAgICsgdmFyaWFudDogQmFzZVZhcmlhbnQ7DQogICAgKyBvcHRpb25zOiBDb21wcmVzc2lvbk9wdGlvbnM7DQogICAgKyByZXN1bHRzOiBDb21wcmVzc2lvblJlc3VsdHM7DQogICAgKyBzdXBwbGllcjogU3VwcGxpZXI8Q29sbGVjdGlvbjxGaWxlPj47DQoNCn0NCg0KYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RQbmdxdWFudENvbXByZXNzSW1hZ2VzIGV4dGVuZHMgQ29tcHJlc3NJbWFnZXMgew0KICAgICMge2Fic3RyYWN0fSBjb21wcmVzcygpOiB2b2lkDQogICAgKyBydW4oKTogdm9pZA0KfQ0KDQpjbGFzcyBQbmdxdWFudENvbXByZXNzSW1hZ2VzIGV4dGVuZHMgQWJzdHJhY3RQbmdxdWFudENvbXByZXNzSW1hZ2VzIHsNCiAgICAjIGNvbXByZXNzKCk6IHZvaWQNCn0NCg0KY2xhc3MgUG5ncXVhbnRDb21wcmVzc0ZsYXRJbWFnZXMgZXh0ZW5kcyBBYnN0cmFjdFBuZ3F1YW50Q29tcHJlc3NJbWFnZXMgew0KICAgICMgY29tcHJlc3MoKTogdm9pZA0KfQ0KQGVuZHVtbA0KClBsYW50VU1MIHZlcnNpb24gMS4yMDIwLjA3YmV0YTgoVW5rbm93biBjb21waWxlIHRpbWUpCihHUEwgc291cmNlIGRpc3RyaWJ1dGlvbikKSmF2YSBSdW50aW1lOiBKYXZhKFRNKSBTRSBSdW50aW1lIEVudmlyb25tZW50CkpWTTogSmF2YSBIb3RTcG90KFRNKSA2NC1CaXQgU2VydmVyIFZNCkphdmEgVmVyc2lvbjogMS43LjBfMjUtYjE1Ck9wZXJhdGluZyBTeXN0ZW06IExpbnV4CkRlZmF1bHQgRW5jb2Rpbmc6IFVURi04Ckxhbmd1YWdlOiBlbgpDb3VudHJ5OiBVUwotLT48L2c+PC9zdmc+">

::: warning
由于 *AAPT 1.0* 已经成为过去式，*Booster* 只支持启用 *AAPT2* 的情况。
:::

## 如何使用

在使用 [booster-task-compression-pngquant](https://github.com/didi/booster/blob/master/booster-task-compression-pngquant) 的时候，还需要引入 [booster-pngquant-provider](https://github.com/johnsonlee/booster-pngquant-provider)，如下所示：


```groovy
buildscript {
    ext {
        kotlin_version = "1.5.31"
        booster_version = "4.15.0"
    }
    repositories {
        mavenLocal()
        mavenCentral()
        google()
        jcenter()
        maven { url 'https://oss.sonatype.org/content/repositories/public/' }
        maven { url 'https://oss.sonatype.org/content/repositories/snapshots/' }
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.5.0'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        classpath "com.didiglobal.booster:booster-gradle-plugin:$booster_version"
        /* 👇👇👇👇 引用这两个模块 👇👇👇👇 */
        classpath "com.didiglobal.booster:booster-task-compression-pngquant:$booster_version"
        classpath "io.johnsonlee.booster:booster-pngquant-provider:2.3.0"
    }
}
```

然后，执行 *compress{Variant}ResourcesWithPngquant* 任务来完成对图片资源的压缩，如下所示：

```bash
$ ./gradlew compressDebugResourcesWithPngquant --info
```

::: warning
*Android Gradle Plugin 3.6* 及以上版本，需要在 *gradle.properties* 中设置：

```properties
android.precompileDependenciesResources=false
```
:::

::: warning
*Android Gradle Plugin 7.0* 及以上版本，需要在 *gradle.properties* 中设置：

```properties
android.enableSourceSetPathsMap=false
```
:::

## 自定义压缩质量

[booster-task-compression-pngquant](https://github.com/didi/booster/tree/master/booster-task-compression-pngquant) 支持自定义的参数如下表所示：

| 选项                                               | 描述               |
| -------------------------------------------------- | -------------------|
| `booster.task.compression.pngquant.option.quality` | 压缩质量 (默认 80) |
| `booster.task.compression.pngquant.option.speed`   | 压缩速度 (默认 3)  |

### 通过 *gradle.properties* 配置

```properties
booster.task.compression.pngquant.option.quality=75
booster.task.compression.pngquant.option.speed=1
```

### 通过命令行配置

```bash
$ ./gradlew assembleDebug \
    -Pbooster.task.compression.pngquant.option.quality=75 \
    -Pbooster.task.compression.pngquant.option.speed=1
```

## 任务报告

当 `compress${Variant}ResourcesWithPngquant` 任务执行完成后会自动在以下路径中生成任务报告：

```
build/reports/booster-task-compression-pngquant/${variant}/report.txt
```

其内容如下所示：

```
50.37% intermediates/res/merged/debug/mipmap-xxxhdpi_ic_launcher_round.png.flat 7,622 15,132 ...
46.30% intermediates/res/merged/debug/mipmap-xxhdpi_ic_launcher_round.png.flat  4,821 10,413 ...
45.95% intermediates/res/merged/debug/mipmap-xxxhdpi_ic_launcher.png.flat       4,194  9,128 ...
42.31% intermediates/res/merged/debug/mipmap-xhdpi_ic_launcher_round.png.flat   2,917  6,895 ...
39.31% intermediates/res/merged/debug/mipmap-xxhdpi_ic_launcher.png.flat        2,511  6,387 ...
36.88% intermediates/res/merged/debug/mipmap-hdpi_ic_launcher_round.png.flat    1,809  4,905 ...
34.90% intermediates/res/merged/debug/mipmap-xhdpi_ic_launcher.png.flat         1,567  4,490 ...
20.72% intermediates/res/merged/debug/mipmap-hdpi_ic_launcher.png.flat            614  2,963 ...
18.51% intermediates/res/merged/debug/mipmap-mdpi_ic_launcher_round.png.flat      515  2,783 ...
 7.09% intermediates/res/merged/debug/mipmap-mdpi_ic_launcher.png.flat            146  2,060 ...
-------------------------------------------------------------------------------------
 TOTAL                                                                         26,716
```

其中，各列涵义如下所示：


1. 压缩率 `(压缩前的大小 - 压缩后的大小) / 压缩前的大小`
1. 合并后的资源文件路径
1. 压缩后的大小
1. 压缩前的大小
1. 原始路径
